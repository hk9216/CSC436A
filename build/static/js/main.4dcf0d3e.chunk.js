(this.webpackJsonpblogproj=this.webpackJsonpblogproj||[]).push([[0],{108:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return r}));var a=c(0),s=c(7),n=c(1);function r(){var e=Object(a.useContext)(s.a),t=e.state,c=e.dispatch,r=t.user;return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({type:"LOGOUT"})},children:["Logged in as: ",Object(n.jsx)("b",{children:r.username}),Object(n.jsx)("input",{type:"submit",value:"Logout"})]})}},113:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c.n(a),n=c(22),r=c.n(n),o=c(6),i=c(9),d=c(7),j=c(121),u=c(119),l=c(117),b=(c(104),c(1));function O(e){var t=e.show,c=e.handleClose,s=Object(a.useContext)(d.a).dispatch,n=Object(a.useState)(""),r=Object(o.a)(n,2),O=r[0],h=r[1],p=Object(a.useState)(!1),x=Object(o.a)(p,2),m=x[0],f=x[1],v=Object(a.useState)(""),g=Object(o.a)(v,2),C=g[0],T=g[1];function w(e){T(e.target.value)}var y=Object(i.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),E=Object(o.a)(y,2),k=E[0],L=E[1];return Object(a.useEffect)((function(){k&&k.data&&(k.data.length>0?(f(!1),s({type:"LOGIN",username:k.data[0].username})):f(!0))}),[k]),Object(a.useEffect)((function(){k&&!1===k.isLoading&&(k.data||k.error)&&(k.error?(f(!0),alert("failed")):(f(!1),console.log(k.data),s({type:"LOGIN",username:O,access_token:k.data.access_token})))}),[k]),Object(b.jsx)(j.a,{show:t,onHide:c,children:Object(b.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),L(O,C),c()},children:[Object(b.jsx)(j.a.Header,{children:Object(b.jsx)(j.a.Title,{children:"Login"})}),Object(b.jsxs)(j.a.Body,{children:[Object(b.jsx)(u.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(b.jsx)(u.a.Control,{type:"text",name:"login-username",value:O,onChange:function(e){h(e.target.value)},id:"login-username"}),Object(b.jsx)(u.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(b.jsx)(u.a.Control,{type:"password",name:"login-password",id:"login-password",onChange:w}),m&&Object(b.jsx)("span",{style:{color:"red"},children:"Invalid username or password"})]}),Object(b.jsxs)(j.a.Footer,{children:[Object(b.jsx)(l.a,{variant:"warning",className:"btn-warning",color:"primary",onClick:c,children:"Cancel"}),Object(b.jsx)(l.a,{variant:"outline-primary",disabled:0===O.length,type:"submit",children:"Login"})]})]})})}c(108);var h=c(2);function p(e){var t=e.show,c=e.handleClose,s=Object(a.useContext)(d.a).dispatch,n=Object(a.useState)({username:"",password:"",passwordRepeat:""}),r=Object(o.a)(n,2),O=r[0],p=r[1],x=Object(a.useState)(""),m=Object(o.a)(x,2),f=(m[0],m[1]),v=Object(i.b)((function(e,t){return{url:"auth/register",method:"post",data:{username:e,password:t,passwordConfirmation:t}}})),g=Object(o.a)(v,2),C=g[0],T=g[1];return Object(a.useEffect)((function(){C&&C.data&&s({type:"REGISTER",username:C.data.username})}),[C]),Object(a.useEffect)((function(){C&&!1===C.isLoading&&(C.data||C.error)&&(C.error?(console.log(C),f("Registration failed, please try again later."),alert("fail")):(console.log(C),f("Registration successful. You may now login."),alert("success")))}),[C]),Object(b.jsx)(j.a,{show:t,onHide:c,children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T(O.username,O.password)},children:[Object(b.jsx)(j.a.Header,{closeButton:!0,children:Object(b.jsx)(j.a.Title,{children:"Register"})}),Object(b.jsxs)(j.a.Body,{children:[Object(b.jsx)(u.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(b.jsx)(u.a.Control,{type:"text",value:O.username,onChange:function(e){return p(Object(h.a)(Object(h.a)({},O),{},{username:e.target.value}))},name:"register-username",id:"register-username"}),Object(b.jsx)(u.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(b.jsx)(u.a.Control,{type:"password",value:O.password,onChange:function(e){return p(Object(h.a)(Object(h.a)({},O),{},{password:e.target.value}))},name:"register-password",id:"register-password"}),Object(b.jsx)(u.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(b.jsx)(u.a.Control,{type:"password",value:O.passwordRepeat,onChange:function(e){return p(Object(h.a)(Object(h.a)({},O),{},{passwordRepeat:e.target.value}))},name:"register-password-repeat",id:"register-password-repeat"})]}),Object(b.jsxs)(j.a.Footer,{children:[Object(b.jsx)(l.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(b.jsx)(l.a,{variant:"primary",type:"submit",disabled:0===O.username.length||0===O.password.length||O.password!==O.passwordRepeat,children:"Register"})]})]})})}function x(){var e=s.a.lazy((function(){return Promise.resolve().then(c.bind(null,108))})),t=Object(a.useContext)(d.a).user,n=(Object(a.useContext)(d.a).dispatchUser,Object(a.useState)(!1)),r=Object(o.a)(n,2),i=r[0],j=r[1],u=Object(a.useState)(!1),h=Object(o.a)(u,2),x=h[0],m=h[1];return t?Object(b.jsx)(e,{}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"justify-content-end",children:[Object(b.jsx)(l.a,{variant:"link",onClick:function(e){return j(!0)},children:"Login"}),Object(b.jsx)(O,{show:i,handleClose:function(){return j(!1)}}),Object(b.jsx)(l.a,{variant:"link",onClick:function(e){return m(!0)},children:"Register"}),Object(b.jsx)(p,{show:x,handleClose:function(){return m(!1)}})]})})}var m=c(14);function f(){var e=Object(m.d)(),t=Object(a.useContext)(d.a).state,c=t.user,s=Object(a.useContext)(d.a).dispatch,n=Object(a.useState)(""),r=Object(o.a)(n,2),j=r[0],u=r[1],l=Object(a.useState)(""),O=Object(o.a)(l,2),h=O[0],p=O[1],x=Object(a.useState)(""),f=Object(o.a)(x,2),v=(f[0],f[1],Object(a.useState)("")),g=Object(o.a)(v,2),C=(g[0],g[1],Object(a.useState)("")),T=Object(o.a)(C,2),w=T[0],y=(T[1],Object(i.b)((function(e){var c=e.title,a=e.description,s=e.complete,n=e.datecreated,r=e.author,o=e.datecompleted;return{url:"/Todo/create",method:"post",headers:{Authorization:"".concat(t.user.access_token)},data:{author:r,title:c,description:a,complete:s,datecreated:n,datecompleted:o}}}))),E=Object(o.a)(y,2),k=E[0],L=E[1];return Object(a.useEffect)((function(){k&&k.data&&(s({type:"CREATE_TODO",title:k.data.title,description:k.data.description,id:k.data.id,author:c.username}),e.navigate("/"))}),[k]),Object(b.jsxs)("form",{onSubmit:function(e){return e.preventDefault(void L({title:j,description:h,complete:w,datecreated:Date().toString(),author:c.username,datecompleted:""}))},children:[Object(b.jsxs)("div",{children:["Author: ",Object(b.jsx)("b",{children:c.username})]}),Object(b.jsx)("div",{children:Object(b.jsx)("label",{htmlFor:"lbltitle",children:"Title:"})}),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("input",{type:"text",name:"txttitle",id:"txttitle",value:j,onChange:function(e){u(e.target.value)},required:!0})]}),Object(b.jsx)("div",{children:Object(b.jsx)("label",{htmlFor:"lbldescription",children:"Description:"})}),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("input",{type:"text",name:"txtdescription",value:h,onChange:function(e){p(e.target.value)},id:"txtdescription"})]}),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("input",{type:"submit",value:"Create"})]})]})}var v=c(58);function g(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}function C(e,t){switch(t.type){case"CREATE_TODO":var c={title:t.title,description:t.description,author:t.author,complete:t.complete,datecompleted:t.datecompleted,datecreated:t.datecreated};if(null!=e)return[c].concat(Object(v.a)(e));case"TOGGLE_TODO":if(null!=e)return e.map((function(e,c){return c===t.id&&(e.complete=t.complete,e.datecompleted=Date.now()),e}));case"DELETE_TODO":if(null!=e)return e.filter((function(e,c){return c!==t.todoitem}));case"FETCH_TodoItem":return t.itemsA;case"FETCH_Users":return t.usersA;default:return e}}function T(e,t){return{user:g(e.user,t),itemsA:C(e.itemsA,t),usersA:C(e.usersA,t)}}var w=c(122);function y(e){var t=e.short,c=void 0!==t&&t,s=e.id,n=e.author,r=e.title,j=e.description,u=e.dateCreated,O=e.DateCompleted,h=Object(a.useContext)(d.a).dispatch,p=Object(a.useContext)(d.a).state,x=Object(a.useState)(!0),f=Object(o.a)(x,2),v=f[0],g=f[1],C=Object(i.b)((function(e){var t=e.DateCompleted,c=e.complete,a=e.id;return{url:"/Todo/update/".concat(a),method:"patch",headers:{Authorization:"".concat(p.user.access_token)},data:{DateCompleted:t,complete:c}}})),T=Object(o.a)(C,2),y=T[0],E=T[1],k=Object(i.b)((function(e){return{url:"/Todo/".concat(e),method:"delete",headers:{Authorization:"".concat(p.user.access_token)}}})),L=Object(o.a)(k,2),D=L[0],_=L[1];Object(a.useEffect)((function(){D&&D.data&&!1===D.isLoading&&h({type:"DELETE_TODO",id:s})}),[D]),Object(a.useEffect)((function(){y&&y.data&&!1===y.isLoading&&h({type:"TOGGLE_TODO",complete:y.data.complete,DateCompleted:y.data.DateCompleted,id:s})}),[y]);return c&&j.length>30&&j.substring(0,30)+"...",Object(b.jsx)(w.a,{children:Object(b.jsx)(w.a.Body,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:["Todo:",s]}),Object(b.jsx)(w.a.Title,{children:Object(b.jsxs)(m.a,{style:{color:"lightblue"},children:[" ",r]})}),Object(b.jsx)(w.a.Subtitle,{children:Object(b.jsxs)("i",{children:["Written by ",Object(b.jsx)("b",{children:n})]})}),Object(b.jsxs)(w.a.Text,{children:["Description: ",j,Object(b.jsxs)("div",{children:["Date Created: ",u]}),Object(b.jsx)("div",{input:!0,type:"label",value:"Complete",id:"lblComplete",children:"Complete"}),Object(b.jsx)("input",{type:"checkbox",onChange:function(e){return g(e.currentTarget.checked)},checked:v}),Object(b.jsx)("button",{onClick:function(){g(!v)?E({DateCompleted:"/1/1900",isChecked:!1,id:s}):E({DateCompleted:O,isChecked:!0,id:s})},children:"Toggle checkbox"}),v&&Object(b.jsxs)("div",{children:["Date Completed:  ",O]}),"console.log(",v,")",Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:Object(b.jsx)(l.a,{variant:"link",onClick:function(e){_(s)},children:"Delete Post"})})]})]})})})}var E=s.a.memo(y);function k(){var e=Object(a.useContext)(d.a).state.itemsA;return console.log(e),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("h3",{children:" Items Completed "}),e.map((function(e,t){return Object(a.createElement)(E,Object(h.a)(Object(h.a)({},e),{},{short:!0,author:e.author,title:e.title,Description:e.description,dateCreated:(new Date).toLocaleDateString(),DateCompleted:(new Date).toLocaleDateString(),key:"post-"+t,id:e._id}))}))]})}function L(e){var t=e.id,c=e.title,s=(e.description,e.complete,e.datecreated,e.author,e.datecompleted,Object(a.useContext)(d.a).state),n=s.user,r=Object(a.useContext)(d.a).dispatch,j=Object(i.b)((function(){return{url:"Todo/items",method:"get",headers:{Authorization:"".concat(s.user.access_token)}}})),u=Object(o.a)(j,2),l=u[0],O=u[1];Object(a.useEffect)((function(){O()}),[s.user.access_token]),Object(a.useEffect)((function(){l&&l.data&&(console.log(l.data),r({type:"FETCH_TodoItem",itemsA:l}))}),[l]),console.log(l.data);l.data;var h=l.isloading;return Object(b.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsxs)(b.Fragment,{children:[h&&"Posts loading..."," ",Object(b.jsx)(k,{})]}),Object(b.jsx)("div",{children:Object(b.jsx)("br",{})}),Object(b.jsxs)("div",{children:["Author: ",Object(b.jsx)("b",{children:n.username})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("label",{htmlFor:"lblID",children:["ID:",t]})}),Object(b.jsx)("div",{children:Object(b.jsx)("label",{htmlFor:"lblID",children:"Title:"})}),Object(b.jsx)("div",{children:Object(b.jsx)("b",{children:c})}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"checkbox"})}),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("input",{type:"submit",value:"Remove"})]})]})}var D=c(12);function _(){var e=Object(a.useContext)(d.a),t=e.state,c=e.dispatch,s=Object(i.b)((function(){return{url:"/Todo/items",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),n=Object(o.a)(s,2),r=n[0],j=n[1];Object(a.useEffect)((function(){j()}),[t.user.access_token]),Object(a.useEffect)((function(){!1===r.isLoading&&r&&r.data&&(console.log(r.data),c({type:"FETCH_TodoItem",itemsA:r.data.Todos}))}),[r]);r.itemsA1;var u=r.isLoading;return Object(b.jsxs)(b.Fragment,{children:[u&&"Todos loading..."," ",Object(b.jsx)(k,{})]})}var A=c(120),S=c(118),R=c(77);function F(e){e.setTheme;var t=Object(a.useContext)(d.a).state.user;Object(R.a)();return Object(b.jsxs)(A.a,{bg:"light",expand:"lg",children:[Object(b.jsx)(A.a.Brand,{href:"/",children:"Blog App"}),Object(b.jsx)(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsxs)(A.a.Collapse,{id:"basic-navbar-nav",children:[Object(b.jsxs)(S.a,{className:"me-auto",children:[t.username&&Object(b.jsx)(S.a.Link,{children:Object(b.jsx)(m.a,{href:"/Todo/create",children:"Create New Todo"})}),t.username&&Object(b.jsx)(S.a.Link,{children:Object(b.jsx)(m.a,{href:"/Todo/Remove/",children:"Remove Todo"})}),t.username&&Object(b.jsx)(S.a.Link,{children:Object(b.jsx)(m.a,{href:"/users",children:"List users"})}),t.username&&Object(b.jsx)(S.a.Link,{children:Object(b.jsx)(m.a,{href:"/users/:id",children:"View User Todos Profile"})})]}),Object(b.jsx)(s.a.Suspense,{fallback:"Loading...",children:Object(b.jsx)(x,{})})]})]})}function I(e){var t=e.short,c=e.id,s=e.username,n=Object(a.useContext)(d.a),r=n.state,j=n.dispatch,u=Object(i.b)((function(){return{url:"/Todo/users",method:"get",headers:{Authorization:"".concat(r.user.access_token)}}})),l=Object(o.a)(u,2),O=l[0],h=l[1];return Object(a.useEffect)((function(){h()}),[r.user.access_token]),Object(a.useEffect)((function(){!1===O.isLoading&&O&&O.data&&(console.log(O.data),j({type:"FETCH_Users",usersA:O.data.TodosUsers}))}),[O]),console.log(I),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:["id: ",c]}),Object(b.jsxs)("div",{children:["name: ",s]}),Object(b.jsxs)("div",{children:[" ",t&&Object(b.jsx)(m.a,{href:"/users/".concat(c,"/"),children:"Todo"})]})]})}function U(){var e=Object(a.useContext)(d.a).state.usersA;return console.log(e),Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("h3",{children:" Users List "}),e.map((function(e,t){return Object(a.createElement)(I,Object(h.a)(Object(h.a)({},e),{},{short:!0,id:e._id,name:e.username,key:"post-"+t}))}))]})}function G(){var e=Object(a.useReducer)(T,{user:"",usersA:[]}),t=Object(o.a)(e,2),c=t[0],s=t[1],n=Object(i.b)((function(){return{url:"/users",method:"get"}})),r=Object(o.a)(n,2),d=r[0],j=r[1];Object(a.useEffect)(j,[]),Object(a.useEffect)((function(){!1===d.isLoading&&d&&d.data&&s({type:"FETCH_Users",usersA:d.data})}),[d]);c.user;return Object(b.jsx)("div",{children:d&&d.data?Object(b.jsx)(U,{}):"Loading..."})}function H(e){var t=e.id,c=Object(a.useContext)(d.a).state,s=Object(a.useContext)(d.a).dispatch,n=Object(i.b)((function(){return{url:"/Todo/items/".concat(t),headers:{Authorization:"".concat(c.user.access_token)},method:"get"}})),r=Object(o.a)(n,2),j=r[0],u=r[1];Object(a.useEffect)((function(){u()}),[c.user.access_token]),Object(a.useEffect)((function(){!1===j.isLoading&&j&&j.data&&(console.log(j.data),s({type:"FETCH_TodoItem",itemsA:j.data.Todos}))}),[j]);j.itemsA1;var l=j.isLoading;return Object(b.jsxs)(b.Fragment,{children:[l&&"Todos loading..."," ",Object(b.jsx)(k,{})]})}var z=function(){var e=Object(D.f)({"/":Object(D.g)({view:Object(b.jsx)(_,{})}),"/Todo/create":Object(D.g)({view:Object(b.jsx)(f,{})}),"/Todo/Remove":Object(D.g)({view:Object(b.jsx)(L,{})}),"/users":Object(D.g)({view:Object(b.jsx)(G,{})}),"/users/:id":Object(D.g)((function(e){return{view:Object(b.jsx)(H,{id:e.params.id})}})),"/Todo/Profile/:id":Object(D.g)((function(e){return{view:Object(b.jsx)(H,{id:e.parans.id})}}))}),t=Object(a.useReducer)(T,{user:"",itemsA:[]}),c=Object(o.a)(t,2),s=c[0],n=c[1];return s.user,Object(b.jsx)("div",{children:Object(b.jsxs)(d.a.Provider,{value:{state:s,dispatch:n},children:[Object(b.jsxs)(m.b,{routes:e,children:[Object(b.jsx)(F,{}),Object(b.jsx)("hr",{}),Object(b.jsx)(m.c,{})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("hr",{}),Object(b.jsx)("br",{})]})})},P=c(40),B=c.n(P).a.create({baseURL:"/"});r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(i.a,{value:B,children:Object(b.jsx)(z,{})})}),document.getElementById("root"))},7:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var a=c(0),s=c.n(a).a.createContext({state:{},dispatch:function(){}})}},[[113,1,2]]]);
//# sourceMappingURL=main.4dcf0d3e.chunk.js.map